<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.FootPrint.dao.PhotoDao">

    <insert id="save" parameterType="Photo" keyProperty="id" useGeneratedKeys="true">
        INSERT INTO
        photo(userId,longitude,latitude,image,time,praiseNum,province,city,label,visible)
        VALUE
        (#{userId},#{longitude},#{latitude},#{imgUrl},#{time},#{praiseNum},#{city},#{label},#{visible})
    </insert>
    
    
    <select id="getById" parameterType="int" resultType="Photo">
        SELECT
            id,
            userId,
            longitude,
            latitude,
            image,
            time,
            praiseNum,
            province,
            label,
            visible
        FROM photo
        WHERE id=#{id}
    </select>
    
    
    <update id="updateVisible" parameterType="Photo">
        UPDATE  photo
        SET
           visible=#{visible}
        WHERE id=#{id}
    </update>

    <resultMap type="Photo" id="resultListPhoto">
        <id column="id" property="id"/>
        <result column="userId" property="userId"/>
        <result column="longitude" property="longitude"/>
        <result column="latitude" property="latitude"/>
        <result column="image" property="imgUrl"/>
        <result column="time" property="time"/>
        <result column="praiseNum" property="praiseNum"/>
        <result column="label" property="label"/>
        <result column="visible" property="visible"/>
    </resultMap>
    <select id="getAllByUserId" parameterType="int" resultMap="resultListPhoto">
        SELECT * FROM photo  WHERE  userId=#{userId}
    </select>
</mapper>